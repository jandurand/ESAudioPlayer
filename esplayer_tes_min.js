function esplayer_load_players(){esplayer_jquery_prepared=true;for(var e=1;e<2048;e++){var t=jQuery("#esplayervar"+e).val();if(typeof t=="undefined")break;var n=t.split("|");var r=new EsAudioPlayer(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12].toLowerCase()=="true",n[13].toLowerCase()=="true",n[14].toLowerCase()=="true",n[15],n[16],n[17],n[18],n[19])}esplayer_autoplay(e-1)}function esplayer_seriesplay(e,t){esp_series_playing_btn_id=e;esp_series_playing_loop=t;for(var n=0;n<Array_EsAudioPlayer.length;n++){if((Array_EsAudioPlayer[n].sid==e||e=="")&&!Array_EsAudioPlayer[n].seriesplaybutton){Array_EsAudioPlayer[n].autoplay=true}else{Array_EsAudioPlayer[n].autoplay=false}}esp_auto_playing=0;esp_series_playing=true;esplayer_autoplay(Array_EsAudioPlayer.length)}function esplayer_reset_seriesplaybutton(){for(var e=0;e<Array_EsAudioPlayer.length;e++){var t=Array_EsAudioPlayer[e];if(t.seriesplaybutton){t.draw_button("play")}}}function esplayer_autoplay(e){e=typeof e!="undefined"?e:0;if(e>0)esp_auto_playing_player_num=e;if(esp_auto_playing<0)return;if(Array_EsAudioPlayer.length<esp_auto_playing_player_num){setTimeout("esplayer_autoplay()",100);return}if(esp_playing_no){setTimeout("esplayer_autoplay()",100);return}for(var t=esp_auto_playing;t<esp_auto_playing_player_num;t++){if(Array_EsAudioPlayer[t].autoplay){esp_auto_playing=t;break}}if(t>=esp_auto_playing_player_num){esp_auto_playing=-1;if(esp_series_playing){if(esp_series_playing_loop){esplayer_seriesplay(esp_series_playing_btn_id,esp_series_playing_loop)}else{esp_series_playing=false;esplayer_reset_seriesplaybutton()}}return}var n=Array_EsAudioPlayer[esp_auto_playing];if(n.created&&n.mode!="slideshow"||n.created&&n.mode=="slideshow"&&n.tt_obj.ready&&!n.tt_obj.nowtotalplaying){if(n.mode=="slideshow"){n.tt_obj.loadimage();n.tt_obj.launch_tt(0)}else{n.func_acc_play_stop()}}else{setTimeout("esplayer_autoplay()",100);return}}function esplayer_autoplay_next(){if(esp_auto_playing<0)return;esp_auto_playing++;setTimeout("esplayer_autoplay()",100)}function fillRoundedRect(e,t,n,r,i){this.beginPath();this.moveTo(e+i,t);this.lineTo(e+n-i,t);this.quadraticCurveTo(e+n,t,e+n,t+i);this.lineTo(e+n,t+r-i);this.quadraticCurveTo(e+n,t+r,e+n-i,t+r);this.lineTo(e+i,t+r);this.quadraticCurveTo(e,t+r,e,t+r-i);this.lineTo(e,t+i);this.quadraticCurveTo(e,t,e+i,t);this.fill()}var esplayer_debug=false;var Array_EsAudioPlayer=new Array;var esp_playing_no=0;var esp_auto_playing=0;var esp_auto_playing_player_num=0;var esp_series_playing=false;var esp_series_playing_btn_id="";var esp_series_playing_loop=false;var soundManager_ready=false;var esplayer_jquery_prepared=false;jQuery(document).ready(function(){esplayer_load_players()});if(!esplayer_isAdmin){soundManager.url=esAudioPlayer_plugin_URL+"/swf/";soundManager.flashVersion=9;soundManager.useFlashBlock=false;soundManager.useHTML5Audio=true;soundManager.preferFlash=true;soundManager.debugMode=false;soundManager.debugFlash=false;soundManager.allowpolling=true;soundManager.useConsole=true;soundManager.onready(function(){soundManager_ready=true})}var EsAudioPlayer=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){this.basecolor_play="";this.symbolcolor_play="";this.basecolor_stop="";this.symbolcolor_stop="";this.basecolor_pause="";this.symbolcolor_pause="";this.color_slider_line="";this.color_slider_knob="";this.n=0;this.sURLs=new Array;this.sURLs[0]=n;this.mySound=new Array;this.mySoundPosition=new Array;this.play=false;this.pause=false;this.created=false;this.preventDrawing=false;this.flgInitializing_beforePlaying=false;this.canvas=0;this.that=this;this.id=t;this.sid=r;this.img_id=g;this.width_org=i;this.height_org=s;this.width=i;this.height=s;this.v_pos_org=o;this.v_pos=o;this.canvas_width=i;this.canvas_height=s;this.shw_rate=u;this.shw_color=a;this.corner_rate=f==-999?-999:f/100;this.smartphone_rate=l==-999?-999:l/100;this.shw_size=0;this.start_anim_retry=0;this.start_time=0;this.anim_ok=false;this.nowPlaying=0;this.border_img=c;this.debug_msg="";this.duration=this.calc_duration(v);this.volume=m;this.mode=e;this.loop=h;this.autoplay=p;this.seriesplaybutton=d;this.tt_id_list=new Array;this.ready=false;var w=this;var E=function(){w.init()};this.init_id=setInterval(E,100);this.anim_interval_id=-1;this.anim_init_interval_id=-1};EsAudioPlayer.prototype.init=function(){if(!esplayer_jquery_prepared)return;clearInterval(this.init_id);var e=this;this.GetSizeInPx();this.sx_st=this.height+this.height*.15;this.sx_en=this.width-this.height*.3;this.sy=this.canvas_height/2;this.slider_x=-1;this.slider_y=-1;this.slider_mouse_ofs_x=0;this.slider_mouse_ofs_y=0;this.slider_length=this.width>=this.height*2&&!this.seriesplaybutton?this.sx_en-this.sx_st:0;this.slider_drag=false;this.slider_width=this.height*.1;this.slider_height=this.height*.5;this.slider_img=new Image;if(this.mode=="simple"){this.isIPhone=(new RegExp("(iPhone|iPod|iPad)","i")).test(navigator.userAgent);this.isAndroid=(new RegExp("(Android)","i")).test(navigator.userAgent);this.isSmartphone="ontouchstart"in window;this.isGecko=navigator.userAgent.match(/SeaMonkey|Firefox/i)&&navigator.userAgent.match(/rv:[56].0/i);this.isIE=(new RegExp("MSIE (3|4|5|6|7|8)","i")).test(navigator.userAgent);jQuery("#"+this.id).bind(this.isSmartphone?"touchstart":"mousedown",function(t){e.onClick(t)})}this.getSetting();if(!this.isIE){if(this.mode=="simple"){var t=function(){e.initCanvas()};this.initCanvas_id=setInterval(t,20)}else{this.anim_ok=true}}else{var n=function(){e.startAnim_IE()};this.int_IE_id=setInterval(n,20)}if(this.mode=="slideshow"){this.tt_id_list=this.sURLs[0].split(",");this.tt_obj=new EsAudioPlayer_tt(this)}else{}if(this.mode=="imgclick"){var r=jQuery("#"+this.img_id);if(jQuery("#"+this.img_id).parent().get(0).tagName.toUpperCase()=="A"){jQuery("#"+this.img_id).parent().contents().unwrap()}jQuery(r).bind(e.isSmartphone?"touchstart":"mousedown",function(t){esp_auto_playing=-1;e.func_play_stop()});jQuery(r).css("cursor","pointer")}var i=function(){e.anim()};this.anim_init_interval_id=setInterval(i,1e3);var s=function(){e.initSound()};this.initSound_interval_id=setInterval(s,200);Array_EsAudioPlayer[Array_EsAudioPlayer.length]=this};EsAudioPlayer.prototype.GetSizeInPx=function(){var e=document.createElement("div");e.setAttribute("id","tmpdiv"+this.id);document.getElementsByTagName("body")[0].appendChild(e);var t=jQuery("#tmpdiv"+this.id);var n=jQuery("#"+this.id+"_tmpspan");jQuery(t).css("width",this.width_org);this.width=parseInt(jQuery(t).css("width").replace("px",""));jQuery(t).css("width",this.height_org);this.height=parseInt(jQuery(t).css("width").replace("px",""));var r=this.v_pos_org;var i=r.substr(0,1);if(i!="-")i="";if(i=="-")r=r.substr(1);jQuery(t).css("width",r);this.v_pos=parseInt(jQuery(t).css("width").replace("px",""));if(i=="-")this.v_pos=-this.v_pos;jQuery(n).css("top",this.v_pos+"px")};EsAudioPlayer.prototype.calc_duration=function(e){var t=0;var n="";var r=0;if(e=="")return 0;split1=e.split(":");if(split1.length==2){t=parseInt(split1[0])*60*1e3;n=split1[1]}else{n=split1[0]}t+=parseFloat(n)*1e3;return t};EsAudioPlayer.prototype.startAnim_IE=function(){this.start_anim_retry++;if(this.start_anim_retry>50){var e=document.getElementById(this.id);var t=!!(e.getContext&&e.getContext("2d"));if(t){this.initCanvas();clearInterval(this.int_IE_id);this.anim_ok=true;return}}};EsAudioPlayer.prototype.initCanvas=function(){this.canvas=document.getElementById(this.id);this.canvas_width=Math.ceil(this.width+this.shw_size);this.canvas_height=Math.ceil(this.height+this.shw_size);if(this.slider_length){}if(!(this.canvas!=null)&&esplayer_debug)alert("Canvas could not be prepared. "+this.id+" is null");if(this.width_org.search(/px/i)==-1||this.height_org.search(/px/i)==-1){this.canvas.setAttribute("width",this.canvas_width);this.canvas.setAttribute("height",this.canvas_height);if(this.isIE){this.canvas.setAttribute("width",this.canvas_width);this.canvas.setAttribute("height",this.canvas_height)}}this.anim_ok=true;this.anim();clearInterval(this.initCanvas_id)};EsAudioPlayer.prototype.getSetting=function(e){fr=typeof e!="undefined"?true:false;if(this.basecolor_play==""||fr)this.basecolor_play=esplayer_basecolor_play;if(this.symbolcolor_play==""||fr)this.symbolcolor_play=esplayer_symbolcolor_play;if(this.basecolor_stop==""||fr)this.basecolor_stop=esplayer_basecolor_stop;if(this.symbolcolor_stop==""||fr)this.symbolcolor_stop=esplayer_symbolcolor_stop;if(this.basecolor_pause==""||fr)this.basecolor_pause=esplayer_basecolor_pause;if(this.symbolcolor_pause==""||fr)this.symbolcolor_pause=esplayer_symbolcolor_pause;if(this.color_slider_line==""||fr)this.color_slider_line=esplayer_color_slider_line;if(this.color_slider_knob==""||fr)this.color_slider_knob=esplayer_color_slider_knob;if(this.shw_rate==-999||fr)this.shw_rate=esplayer_shadowsize;if(this.shw_color==""||fr)this.shw_color=esplayer_shadowcolor;if(this.corner_rate==-999||fr)this.corner_rate=esplayer_cornersize/100;if(this.smartphone_rate==-999||fr)this.smartphone_rate=esplayer_smartphonesize/100;this.shw_size=Math.min(Math.min(this.width,this.height)*this.shw_rate,100);if(fr){this.preventDrawing=false;this.anim()}};EsAudioPlayer.prototype.initSound=function(){if(esplayer_isAdmin||this.seriesplaybutton){function e(){}e.prototype.setPosition=function(e){this.position=e};e.prototype.play=function(){this.playState=1};e.prototype.stop=function(){this.playState=0};e.prototype.pause=function(){};this.mySound[0]=new e;this.mySound[0].BytesLoaded=1;this.mySound[0].playState=0;this.mySound[0].duration=this.duration;this.mySound[0].durationEstimate=this.duration;this.mySound[0].position=0;this.mySound[0].bytesTotal=1;this.mySoundPosition[0]=0;this.created=true;this.anim();clearInterval(this.initSound_interval_id);return}if(!this.created){if(this.mode=="slideshow"&&!esp_tt_data_ready){return}if(soundManager_ready){if(this.mode=="slideshow"){this.nowPlaying=0;var t;for(t=0;t<this.tt_id_list.length;t++){this.sURLs[t]=esp_tt_data[this.tt_id_list[t]].url;if(soundManager.canPlayURL(this.sURLs[t])){this.mySound[t]=soundManager.createSound({id:this.tt_id_list[t],url:this.sURLs[t],autoLoad:false,stream:true,autoPlay:false,volume:this.volume})}this.mySoundPosition[t]=0}this.created=true;clearInterval(this.initSound_interval_id)}else{if(soundManager.canPlayURL(this.sURLs[0])){this.mySound[0]=soundManager.createSound({id:this.id,url:this.sURLs[0],autoLoad:false,stream:true,autoPlay:false,volume:this.volume})}this.mySoundPosition[0]=0;this.created=true;clearInterval(this.initSound_interval_id);this.anim()}}}};EsAudioPlayer.prototype.onClick=function(e){if(esplayer_isAdmin)return;this.preventDrawing=false;this.ofs=jQuery(this.canvas).offset();var t=this.getEv(e).pageX-this.ofs.left;var n=this.getEv(e).pageY-this.ofs.top;var r=this.width>=this.height*2?this.height:this.width;if(t>=1&&n>=1&&t<r&&n<this.height){if(this.seriesplaybutton){this.func_stop_all_the_other_players();if(esp_series_playing){esp_series_playing=false;esplayer_reset_seriesplaybutton();if(esp_series_playing_btn_id==this.sid)return}esplayer_seriesplay(this.sid,this.loop);this.draw_button("stop");return}esp_auto_playing=-1;esp_series_playing=false;esplayer_reset_seriesplaybutton();this.func_play_stop()}if(this.slider_x>0){var i=this.slider_width;var s=this.slider_height;if(t>this.slider_x-i*4&&t<this.slider_x+i*3.5&&n>this.slider_y-s/2-i*5&&n<this.slider_y+s/2+i*5){this.slider_mouse_ofs_x=t-this.slider_x;this.slider_mouse_ofs_y=n-this.slider_y;this.slider_drag=true;var o=this;jQuery(document).bind(this.isSmartphone?"touchmove":"mousemove",function(e){o.onMouseMove(e)});jQuery(document).bind(this.isSmartphone?"touchend":"mouseup",function(e){o.onMouseUp(e)});return}}if(t>=this.calc_sx(0)-this.slider_width/2&&n>=this.sy-this.slider_height/2&&t<=this.calc_sx(-1)+this.slider_width/2&&n<=this.sy+this.slider_height/2){this.slider_mouse_ofs_x=0;this.mySound.setPosition(this.calc_pos(t))}};EsAudioPlayer.prototype.getEv=function(e){return this.isSmartphone?window.event.changedTouches[0]:e};EsAudioPlayer.prototype.onMouseMove=function(e){this.slider_x=this.getEv(e).pageX-this.slider_mouse_ofs_x-this.ofs.left;this.slider_x=Math.max(this.calc_sx(0),this.slider_x);this.slider_x=Math.min(this.calc_sx(this.mySound[this.nowPlaying].duration),this.slider_x);this.preventDrawing=false;this.anim()};EsAudioPlayer.prototype.onMouseUp=function(e){this.mySound[this.nowPlaying].setPosition(this.calc_pos(this.slider_x));var t=this;jQuery(document).unbind("mousemove touchmove mouseup touchend");this.slider_drag=false};EsAudioPlayer.prototype.calc_sx=function(e){if(e<0)return this.sx_en;if(e==0)return this.sx_st;var t=this.mySound[this.nowPlaying];var n=this.duration>0?this.duration:t.durationEstimate;var r=t.bytesLoaded!=t.bytesTotal?n:t.duration;return this.sx_st+(this.sx_en-this.sx_st)*e/r};EsAudioPlayer.prototype.calc_pos=function(e){var t=this.mySound[this.nowPlaying];var n=this.duration>0?this.duration:t.durationEstimate;var r=t.bytesLoaded!=t.bytesTotal?n:t.duration;return(e-this.sx_st)/(this.sx_en-this.sx_st)*r};EsAudioPlayer.prototype.draw_button_base=function(e,t,n,r,i){var s=this.canvas.getContext("2d");this.ie_shadow(s,e,t,n,r);s.fillStyle=i;this.set_button_shadow(s,true);s.fillRoundedRect(e,t,n-e,r-t,Math.min(n-e,r-t)*this.corner_rate);this.set_button_shadow(s,false)};EsAudioPlayer.prototype.draw_play_button=function(e,t,n,r,i){var s=this.canvas.getContext("2d");s.beginPath();s.moveTo(e+(n-e)*.3,t+(r-t)*.25);s.lineTo(e+(n-e)*.8,t+(r-t)*.5);s.lineTo(e+(n-e)*.3,t+(r-t)*.75);s.closePath();s.fillStyle=i;s.fill()};EsAudioPlayer.prototype.draw_stop_button=function(e,t,n,r,i){var s=this.canvas.getContext("2d");s.fillStyle=i;s.fillRect(e+(n-e)*.3,t+(r-t)*.3,(n-e)*.4,(r-t)*.4)};EsAudioPlayer.prototype.draw_pause_button=function(e,t,n,r,i){var s=this.canvas.getContext("2d");s.fillStyle=i;s.fillRect(e+(n-e)*.25,t+(r-t)*.3,(n-e)*.2,(r-t)*.4);s.fillRect(e+(n-e)*.55,t+(r-t)*.3,(n-e)*.2,(r-t)*.4)};EsAudioPlayer.prototype.set_button_shadow=function(e,t){if(t){e.shadowBlur=this.shw_size*(this.isGecko?.5:.7);e.shadowOffsetX=this.shw_size/1.7;e.shadowOffsetY=this.shw_size/1.7*(this.isAndroid?-1:1);e.shadowColor=this.shw_color}else{e.shadowBlur=0;e.shadowOffsetX=0;e.shadowOffsetY=0;e.shadowColor="#000000"}};EsAudioPlayer.prototype.ie_shadow=function(e,t,n,r,i,s,o){if(this.isIE){e.fillStyle=this.shw_color;var o=this.shw_size;e.fillRoundedRect(t+o*.9,n+o*.9,r-t,i-n,Math.min(r-t,i-n)*this.corner_rate)}};EsAudioPlayer.prototype.draw_button=function(e){var t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas_width,this.canvas_height);var n=this.width>=this.height*2?this.height:this.width;switch(e){case"play":this.draw_button_base(0,0,this.width-0,this.height-0,this.basecolor_play);this.draw_play_button(0,0,n-0,this.height-0,this.symbolcolor_play);break;case"stop":this.draw_button_base(0,0,this.width-0,this.height-0,this.basecolor_stop);this.draw_stop_button(0,0,n-0,this.height-0,this.symbolcolor_stop);break;case"pause":this.draw_button_base(0,0,this.width-0,this.height-0,this.basecolor_pause);this.draw_pause_button(0,0,n-0,this.height-0,this.symbolcolor_pause);break}};var cnt=0;EsAudioPlayer.prototype.anim=function(){if(this.mySound[this.nowPlaying]===undefined)return;if(this.mySound[this.nowPlaying].playState){this.flgInitializing_beforePlaying=false}if(this.play&&!this.mySound[this.nowPlaying].playState&&!this.flgInitializing_beforePlaying&&!esplayer_isAdmin){this.func_stop();if(this.loop){this.func_acc_play_stop();return}if(this.mode!="slideshow")esplayer_autoplay_next()}if(!this.anim_ok)return;if(this.preventDrawing)return;if(this.mode=="simple"){var e=this.canvas.getContext("2d");if(this.play){if(this.pause){this.draw_button("play")}else if(this.slider_length>0){this.draw_button("pause")}else{this.draw_button("stop")}}else{this.draw_button("play")}if(this.slider_length>0){var t=this.height*.5;e.fillStyle=this.color_slider_line;e.fillRect(this.sx_st,t-this.height*.03/2,this.sx_en-this.sx_st,this.height*.03);var n=this.mySound[this.nowPlaying];if(!(n.bytesLoaded===undefined||n.bytesLoaded===null)){e.fillStyle=this.color_slider_line;e.fillRect(this.sx_st,t-this.height*.06/2,(this.sx_en-this.sx_st)*(n.bytesLoaded/n.bytesTotal),this.height*.06)}var r;if(n.position)r=n.position;else r=this.mySoundPosition[this.nowPlaying];var i=0;if(!this.slider_drag){this.slider_y=t;var s=this.duration>0?this.duration:n.durationEstimate;var o=n.bytesLoaded!=n.bytesTotal?s:n.duration;if(o){this.slider_x=this.sx_st+(this.sx_en-this.sx_st)*(r/o);i=this.slider_x-this.slider_width/2}else{i=this.sx_st-this.slider_width/2}}else{i=this.slider_x-this.slider_width/2}e.fillStyle=this.color_slider_knob;e.fillRect(i-this.slider_width/2,t-this.slider_height/2,this.slider_width,this.slider_height)}}if(this.anim_init_interval_id!=-1){clearInterval(this.anim_init_interval_id);this.anim_init_interval_id=-1}if(!this.created)return;if(!this.play)this.preventDrawing=true};CanvasRenderingContext2D.prototype.fillRoundedRect=fillRoundedRect;EsAudioPlayer.prototype.func_play_stop=function(){var e="";if(arguments.length)e=arguments[0];if(!this.created)return;if(!this.play){this.func_stop_all_the_other_players()}if(this.pause){this.pause=false;this.mySound[this.nowPlaying].resume();return}if(!this.play){var t=this;var n=function(){t.anim()};this.anim_interval_id=setInterval(n,50);this.start_time=(new Date).getTime();this.mySound[this.nowPlaying].play();this.play=true;esp_playing_no++;this.flgInitializing_beforePlaying=true}else{if(this.slider_length>0&&e!="play/stop"||e=="play/pause"){this.mySound[this.nowPlaying].pause();this.pause=true}else if(e!="play"){this.func_stop()}}this.anim()};EsAudioPlayer.prototype.func_stop_all_the_other_players=function(){if(esplayer_isAdmin)return;for(i=0;i<Array_EsAudioPlayer.length;i++){if(Array_EsAudioPlayer[i].id!=this.id){if(Array_EsAudioPlayer[i].play){Array_EsAudioPlayer[i].func_stop();if(!!Array_EsAudioPlayer[i].tt_obj){Array_EsAudioPlayer[i].tt_obj.stop_slideshow()}}}}};EsAudioPlayer.prototype.func_acc_play=function(){if(!this.play){this.preventDrawing=false;this.func_play_stop()}};EsAudioPlayer.prototype.func_acc_stop=function(){this.func_stop_all_the_other_players();this.func_stop()};EsAudioPlayer.prototype.func_acc_play_stop=function(){this.preventDrawing=false;this.func_play_stop("play/stop")};EsAudioPlayer.prototype.func_acc_play_pause=function(){this.preventDrawing=false;this.func_play_stop("play/pause")};EsAudioPlayer.prototype.func_acc_seek=function(e,t){var n=this.mySound[this.nowPlaying];var r=this.duration>0?this.duration:n.durationEstimate;var i=n.bytesLoaded!=n.bytesTotal?r:n.duration;var s=n.position;var o=0;if(t=="pct"){o=s+e*.01*i}else if(t=="sec"){o=s+e*1e3}if(o<0)o=0;if(o>i)return;n.setPosition(o);this.preventDrawing=false;this.anim()};EsAudioPlayer.prototype.func_stop=function(){this.mySound[this.nowPlaying].stop();this.mySound[this.nowPlaying].setPosition(0);this.play=false;this.pause=false;if(0){var e=this.mySound[this.nowPlaying].url;var t=this.mySound[this.nowPlaying].sID;this.mySound[this.nowPlaying].destruct();this.mySound[this.nowPlaying]=soundManager.createSound({id:t,url:e,autoLoad:false,stream:true,autoPlay:false,volume:this.volume})}this.anim();if(this.anim_interval_id!=-1){clearInterval(this.anim_interval_id);this.anim_interval_id=-1}esp_playing_no--};EsAudioPlayer.prototype.switch_music_by_ttid=function(e){var t;for(t=0;t<this.tt_id_list.length;t++){if(e==this.tt_id_list[t]){this.nowPlaying=t;return}}};EsAudioPlayer.prototype.getCurrentPosition=function(){var e=(new Date).getTime();var t=e-this.start_time;var n=this.mySound[this.nowPlaying].position;if(t<n){this.start_time=e-n}if(t>n&&t-n>500&&n<this.mySound[this.nowPlaying].duration){this.start_time=e-n}return e-this.start_time}